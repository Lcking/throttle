# UX Constitution（交互宪法）

> 本文档定义 Throttle 的不可违背交互原则。
> **任何功能、规则、提示文案、交互流程**的设计与合并，均必须遵循本宪法。
> 违反宪法的实现即使“更聪明/更省钱”，也应视为缺陷而拒绝合并。

---

## 1. Co-Pilot Principle（副驾驶原则）

Throttle 永远不接管控制权：

* **永远不接管用户操作**
* **永远不阻断用户行为**
* **永远不评判对错或能力**

Throttle 的唯一职责是：

> 在用户即将“踩深油门”的那一刻，提示潜在风险，并给出可选的替代路径。

---

## 2. Timing Principle（时机原则）

所有提示 **必须发生在 AI 调用之前（Pre-call）**：

* 禁止任何形式的“事后提醒”或“账后分析”
* 禁止在调用完成后才提示“你刚才花了很多钱/你做错了”

Throttle 存在的意义，是在成本尚未发生前介入。

---

## 3. Context-Aware Principle（情境感知原则）

Throttle 的判断必须是**多维的**，同时考虑：

1. 当前编辑器模式（Plan / Agent / Ask / Debug）
2. Prompt 的行为类型（决策 / 执行 / 体力）
3. 所选模型的能力等级（普通 / 高推理）

任意单一维度判断，均视为不完整。

> 例：同一句“帮我实现”，在 Plan 模式与 Agent 模式的风险含义不同；
> 同一句“给我方案”，在高推理模型与轻量模型的成本含义也不同。

---

## 4. Tone Principle（语气原则）

Throttle 的提示语气必须：

* 冷静（Calm）
* 信息充分（Informative）
* 非权威式（Non-authoritative）

Throttle 像副驾驶说话，而不是像警察或经理。

### 4.1 文案禁区

提示文案禁止出现：

* “你不应该…”
* “你做错了…”
* “你这样很蠢/很浪费…”
* “必须/立刻/禁止” 等强制语气（除非是明确安全风险且仍不阻断）

### 4.2 推荐文案框架

建议使用三段式：

1. **检测到什么**（事实）
2. **为什么需要注意**（成本/风险）
3. **你可以怎么做**（替代路径 + 继续按钮）

---

## 5. Non-Blocking Principle（非阻断原则）

在 v0.x 阶段：

* Throttle **不允许**以任何方式阻止用户发送请求
* Throttle **不允许**自动替用户切换模式/切换模型
* Throttle **不允许**强制插入或修改用户 prompt

> 可以提醒、可以建议、可以提供按钮，但用户永远拥有最终决定权。

---

## 6. Silence-over-False-Positive Principle（宁可沉默也不要误报）

Throttle 的第一原则不是“多管”，而是“少打扰”。

* **宁漏报，不误报**
* 误报的代价比漏报更大（用户会关掉你）
* 规则阈值必须保守、可配置

---

## 7. One-Click Recoverability（一步可恢复原则）

每一次提醒都必须提供：

* **继续本次操作**（默认、最明显）
* 至少一个可执行替代路径（如：切换模式/切换模型/打开新会话）
* 可选：**对此规则不再提示**（按规则静音）

用户不应在弹窗里“被迫思考很久”。

---

## 8. Friction Budget（交互摩擦预算）

Throttle 的价值是“省钱与稳定”，但前提是“不会浪费用户时间”。

因此必须满足：

* **未命中规则时：0 交互**（完全不打扰）
* **命中规则时：≤ 1 次额外交互**（一键继续或一键改道）
* **默认 95% 的发送不弹任何 UI**（高风险才提示）
* 每 20 次发送平均 ≤ 1 次提醒（可通过 strictness 调整）

任何功能若显著增加点击次数，必须证明其净收益，并提供关闭选项。

---

## 9. User Sovereignty（用户主权）

* 用户可以随时关闭 Throttle、关闭某条规则、或降低严格度
* 默认行为必须可预测：不做“暗中决定”
* 任何学习/个性化（例如“以后类似情况自动继续”）都必须：

  * 明确征得同意
  * 可撤销

---

## 10. Governance（治理与合并标准）

在开源协作中，本宪法是最高裁决标准：

* 任何 PR 必须说明：是否新增/修改了提示、阈值、动作
* 任何新增提示必须明确：发生在 pre-call，且不阻断
* 任何新增规则必须提供：**反例/失败模式**与误报控制策略

> 你现在做的不是“加 UX 规范”，而是给一个全新的 AI 工具角色立了一部“宪法”。
> 这意味着：新功能不能乱加，PR 不能随意合并，社区讨论有最高裁决标准。

---

## 附录：标准提示模板（可复用）

**标题**：可能在当前模式下过度加速
**正文**：

* 检测到：{mode} + {modelTier} + {intent}
* 影响：可能产生更高资源消耗 / 更高误改风险
* 建议：{action A} 或 {action B}
  **按钮**：继续｜切换到轻量模型｜切换到 Ask/Agent｜此规则不再提示

---
